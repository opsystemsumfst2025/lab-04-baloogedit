POSIX Thread (pthread) Gyorsreferencia
=======================================

THREAD KEZELES
--------------

Definicio:
    #include <pthread.h>
    pthread_t thread;

Thread letrehozasa:
    int pthread_create(pthread_t *thread, const pthread_attr_t *attr,
                       void *(*start_routine)(void *), void *arg);
    
    Peldaa:
        pthread_create(&thread, NULL, thread_function, NULL);

Thread bevarasa:
    int pthread_join(pthread_t thread, void **retval);
    
    Pelda:
        pthread_join(thread, NULL);

Thread kilépése:
    void pthread_exit(void *retval);

Aktualis thread ID:
    pthread_t pthread_self(void);


MUTEX (MUTUAL EXCLUSION)
------------------------

Definicio:
    pthread_mutex_t mutex = PTHREAD_MUTEX_INITIALIZER;
    vagy
    pthread_mutex_t mutex;

Inicializalas:
    int pthread_mutex_init(pthread_mutex_t *mutex, 
                          const pthread_mutexattr_t *attr);
    
    Pelda:
        pthread_mutex_init(&mutex, NULL);

Zarolas (lock):
    int pthread_mutex_lock(pthread_mutex_t *mutex);
    
    Blokkol, amig a mutex elerheto nem lesz.

Feloldas (unlock):
    int pthread_mutex_unlock(pthread_mutex_t *mutex);

Try lock (nem blokkol):
    int pthread_mutex_trylock(pthread_mutex_t *mutex);
    
    Azonnal visszater, sikeres vagy sikertelen.

Megszuntetes:
    int pthread_mutex_destroy(pthread_mutex_t *mutex);


HASZNALATI MINTA
----------------

Globalis valtozo vedelme:

    int counter = 0;
    pthread_mutex_t counter_mutex = PTHREAD_MUTEX_INITIALIZER;
    
    void* thread_func(void* arg) {
        pthread_mutex_lock(&counter_mutex);
        counter++;  // Kritikus szekcio
        pthread_mutex_unlock(&counter_mutex);
        return NULL;
    }


FORDITASI FLAGEK
----------------

    gcc -pthread program.c -o program
    
    vagy
    
    gcc -lpthread program.c -o program


GYAKORI HIBAK
-------------

1. Deadlock: Ket thread var egymasra
   Megoldas: Mindig ugyanabban a sorrendben vedd a lockokat

2. Forgot unlock: Lock utan nincs unlock
   Megoldas: Minden lock utan legyen unlock (error kezelesnel is!)

3. Race condition: Kritikus szekcio nincs vedve
   Megoldas: Minden kozos valtozo irast/olvasast vedjed mutexel


VISSZATERESI ERTEKEK
--------------------

Siker: 0
Hiba: nem-nulla hibakod (errno-hoz hasonloan)

Hiba ellenorzes:
    if (pthread_create(&thread, NULL, func, NULL) != 0) {
        perror("pthread_create");
        exit(1);
    }
